<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>sqldeployer Maven Mojo - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          </head>
  <body class="composite">
    <div id="banner">
                  <a href="" id="bannerLeft">
    
            
    
            </a>
                          <span id="bannerRight">
    
            Sqldeployer by Francesco Benincasa
    
            </span>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
            
  
    
            <div class="xleft">
        Last Published: 13 May 2012 02:26 CEST
                      </div>
            <div class="xright">      
  

  
    
            
  
    
             Version: 1.0.0
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
            
  
    
                   <h5>Overview</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Introduction</a>
          </li>
              
    <li class="none">
                    <a href="goals.html">Goals</a>
          </li>
              
    <li class="none">
              <strong>Usage</strong>
        </li>
              
    <li class="none">
                    <a href="faq.html">FAQ</a>
          </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
            
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Usage</h2>
<p>Di seguito e' riportato un esempio di come il plugin puo' essere utilizzato.</p>
<p>Il plugin puo' essere agganciato ad una qualunque fase di build. Per convenienza, si e' scelto di legarla alla fase di <b>prepare-package</b>.</p>
<p>Per collegarsi alla base dati bisogna definire come dipendenza del plugin il <i>jar</i> contentente i driver jdbc da utilizzare.</p>
<div class="source"><pre>
&lt;project&gt;
  [...]
  &lt;build&gt;
    [...]
    &lt;plugins&gt;
      [...]
      
      &lt;!-- Plugin per l'esecuzione di codice sql prima del deploy --&gt;
      &lt;plugin&gt;
                 &lt;groupId&gt;org.xcesco&lt;/groupId&gt;
                 &lt;artifactId&gt;sqldeployer&lt;/artifactId&gt;
                 &lt;version&gt;1.0.0&lt;/version&gt;
                 &lt;executions&gt;
                        &lt;execution&gt;
                                &lt;phase&gt;prepare-package&lt;/phase&gt;
                                &lt;goals&gt;
                                        &lt;goal&gt;sqldeploy&lt;/goal&gt;
                                &lt;/goals&gt;
                        &lt;/execution&gt;
                 &lt;/executions&gt;
                 &lt;configuration&gt;
                        &lt;goals&gt;sqldeploy&lt;/goals&gt;

                        &lt;fileNameFilter&gt;dev*.sql&lt;/fileNameFilter&gt;
                        &lt;ignoredErrors&gt;ORA-00942, ORA-01438&lt;/ignoredErrors&gt;
                        &lt;databaseUrl&gt;jdbc:oracle:thin:@127.0.0.1:1573:ORACLE10&lt;/databaseUrl&gt;
                        &lt;databaseUser&gt;USERNAME&lt;/databaseUser&gt;
                        &lt;databasePwd&gt;PASSWORD&lt;/databasePwd&gt;
                        &lt;databaseType&gt;oracle10&lt;/databaseType&gt;
                        
                 &lt;/configuration&gt;
                 
                 &lt;!-- Driver jdbc utilizzato per collegarsi alla base dati. --&gt;
                 &lt;dependencies&gt;
                        &lt;dependency&gt;
                                &lt;groupId&gt;com.oracle&lt;/groupId&gt;
                                &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;
                                &lt;version&gt;11.2.0.1.0&lt;/version&gt;
                                &lt;type&gt;jar&lt;/type&gt;
                                &lt;scope&gt;compile&lt;/scope&gt;
                        &lt;/dependency&gt;
                 &lt;/dependencies&gt;
                &lt;/plugin&gt;
                
      [...]
    &lt;/plugins&gt;
    [...]
  &lt;/build&gt;
  [...]
&lt;/project&gt;

</pre>
</div>
</div>
<div class="section"><h2>Configurazione</h2>
<p>Esistono diversi parametri di configurazione per modificare il comportamento del plugin. Di seguito sono riportati con annessa spiegazione.</p>
<table class="bodyTable"><tbody><tr class="a"><th align="left">Nome</th>
<th align="left">Descrizione</th>
<th align="left">Valore di default</th>
<th align="left">Tipo di parametro</th>
</tr>
<tr class="b"><td align="left">buildNumber</td>
<td align="left">Indica il numero di build che si sta eseguendo. Normalmente non occorre specificare direttamente<br />
questo parametro in quanto la variabile <i>buildNumber</i> viene valorizzata direttamente dal plugin<br />
buildnumber-maven-plugin (group org.codehaus.mojo).</td>
<td align="left">${buildNumber}</td>
<td align="left">OPZIONALE</td>
</tr>
<tr class="a"><td align="left">svnUrl</td>
<td align="left">Indica l'url del repository svn dal quale si sta effettuando la build. Normalmente tale parametro<br />
viene ricavato automaticamente dal plugin.</td>
<td align="left">${project.scm.connection}</td>
<td align="left">OPZIONALE</td>
</tr>
<tr class="b"><td align="left">version</td>
<td align="left">Indica il numero di versione che si sta costruendo. Normalmente tale parametro viene ricavato<br />
direttamente dal plugin.</td>
<td align="left">${project.version}</td>
<td align="left">OPZIONALE</td>
</tr>
<tr class="a"><td align="left">sqlDirectory</td>
<td align="left">Rappresenta la cartella nella quale si trovano i file sql da eseguire. Di default la cartella<br />
e' <i>src/main/sql</i>.</td>
<td align="left">src/main/sql/</td>
<td align="left">OPZIONALE</td>
</tr>
<tr class="b"><td align="left">fileNameFilter</td>
<td align="left">Rappresenta il tipo di filtro da applicare ai nomi dei file trovati nella cartella <i>sqlDirectory</i><br />
per vedere quali elaborare e quali no. Il carattere * sta per 'qualiasi carattere'.<br />
Mettere da esempio <i>dev*.sql</i> equivale a dire: qualunque file il cui nome inizia con dev e termina<br />
con .sql.</td>
<td align="left">*.sql</td>
<td align="left"><b>OBBLIGATORIO</b></td>
</tr>
<tr class="a"><td align="left">ignoredErrors</td>
<td align="left">rapprsenta gli errori sql che possono essere considerati come NON BLOCCANTI per l'esecuzione del<br />
plugin. E' una lista di valori i cui elementi sono separati da virgole. Se i singoli elementi<br />
sono numeri, verranno interpretati come codici d'errore sql generici. Se non sono semplici numeri<br />
verranno interpretati come errori specifici del database.<br />
Ad esempio, per il database ORACLE, per specificare degli errori specifici del database si potra'<br />
mettere: ORA-00942, ORA-01438.</td>
<td align="left">src/main/sql/</td>
<td align="left">OPZIONALE</td>
</tr>
<tr class="b"><td align="left">databaseUrl</td>
<td align="left">Indica l'url del database.</td>
<td align="left"></td>
<td align="left"><b>OBBLIGATORIO</b></td>
</tr>
<tr class="a"><td align="left">databaseUser</td>
<td align="left">User per accedere al database.</td>
<td align="left"></td>
<td align="left"><b>OBBLIGATORIO</b></td>
</tr>
<tr class="b"><td align="left">databasePwd</td>
<td align="left">Password per accedere al database.</td>
<td align="left"></td>
<td align="left"><b>OBBLIGATORIO</b></td>
</tr>
<tr class="a"><td align="left">databaseType</td>
<td align="left">Indica il tipo di database al quale ci si vuole connettere. Attualmente sono supportati i seguenti<br />
valori: oracle8, oracle9, oracle10, hsqldb.</td>
<td align="left">oracle10</td>
<td align="left"><b>OBBLIGATORIO</b></td>
</tr>
</tbody>
</table>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2012
    
          
  

  
    
            
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
